(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8994:function(e,t,s){Promise.resolve().then(s.bind(s,8980))},8980:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var n=s(7437),r=s(6691),l=s.n(r),c={src:"/Frontend_Mentor/interactive-comments-section-main//_next/static/media/icon-reply.23d7b637.svg",height:13,width:14,blurWidth:0,blurHeight:0},i={src:"/Frontend_Mentor/interactive-comments-section-main//_next/static/media/icon-edit.ff1ce63f.svg",height:14,width:14,blurWidth:0,blurHeight:0},m={src:"/Frontend_Mentor/interactive-comments-section-main//_next/static/media/icon-delete.f314ad3f.svg",height:14,width:12,blurWidth:0,blurHeight:0},a=s(2265);let u=e=>{let{plusFunction:t}=e,[s,r]=(0,a.useState)("#C5C6EF");return(0,n.jsx)("button",{onClick:t,onMouseEnter:()=>{r("hsl(238, 40%, 52%)")},onMouseLeave:()=>{r("#C5C6EF")},className:"flex h-full w-full items-center justify-center",children:(0,n.jsx)("svg",{width:"11",height:"11",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M6.33 10.896c.137 0 .255-.05.354-.149.1-.1.149-.217.149-.354V7.004h3.315c.136 0 .254-.05.354-.149.099-.1.148-.217.148-.354V5.272a.483.483 0 0 0-.148-.354.483.483 0 0 0-.354-.149H6.833V1.4a.483.483 0 0 0-.149-.354.483.483 0 0 0-.354-.149H4.915a.483.483 0 0 0-.354.149c-.1.1-.149.217-.149.354v3.37H1.08a.483.483 0 0 0-.354.15c-.1.099-.149.217-.149.353v1.23c0 .136.05.254.149.353.1.1.217.149.354.149h3.333v3.39c0 .136.05.254.15.353.098.1.216.149.353.149H6.33Z",fill:s})})})},o=e=>{let{minusFunction:t}=e,[s,r]=(0,a.useState)("#C5C6EF");return(0,n.jsx)("button",{onClick:t,onMouseEnter:()=>{r("hsl(238, 40%, 52%)")},onMouseLeave:()=>{r("#C5C6EF")},className:"flex h-full w-full items-center justify-center",children:(0,n.jsx)("svg",{width:"11",height:"3",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M9.256 2.66c.204 0 .38-.056.53-.167.148-.11.222-.243.222-.396V.722c0-.152-.074-.284-.223-.395a.859.859 0 0 0-.53-.167H.76a.859.859 0 0 0-.53.167C.083.437.009.57.009.722v1.375c0 .153.074.285.223.396a.859.859 0 0 0 .53.167h8.495Z",fill:s})})})},d=e=>{let{icon:t,text:s,color:r,onButtonClick:c}=e;return(0,n.jsxs)("button",{onClick:c,className:"flex items-center gap-[0.45em] hover:opacity-40",children:[(0,n.jsx)(l(),{className:"h-fit w-fit",src:t,alt:s}),(0,n.jsx)("span",{className:"font-[500] ".concat(r),children:s})]})},x=e=>{let{mobileHide:t,text:s,onButtonClick:r}=e;return(0,n.jsx)("button",{onClick:r,className:"".concat(t?"hidden sm:flex":"flex","  w-[6.5em] items-center justify-center rounded-[0.5em] bg-moderateBlue py-[0.75em] font-[500] text-white hover:opacity-40"),children:s})};function h(){let e;let[t,s]=(0,a.useState)(null),[r,h]=(0,a.useState)(!1),p=(0,a.useRef)(null),f=(0,a.useRef)(!1),[g,w]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),[N,b]=(0,a.useState)(40);(0,a.useEffect)(()=>{let e=()=>{window.innerWidth>=768?b(40):b(20)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("./data.json"),t=await e.json();s(t)}catch(e){console.error("Error fetching data:",e)}})()},[]);let y=e=>{let{content:g,createdAt:w,score:j,replyingTo:v,username:b,webp:y,plusFunction:C,minusFunction:k,onButtonDeleteClick:B,onButtonReplyClick:E,passEditedData:F,isNotReply:U}=e,S=t&&b===t.currentUser.username,[A,D]=(0,a.useState)(!1),[_,R]=(0,a.useState)(g),[H,M]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{_||D(!0)},[_]),(0,n.jsxs)("div",{className:"flex min-h-[9.45em] gap-[1.5em] py-[1.5em] ".concat(v&&!f.current?"w-full md:w-[40.1em]":"w-full md:w-[45.625em]","  rounded-[0.5em] bg-white pl-[1.5em] ").concat(A&&"mt-[-0.6em]"),children:[A&&H?(0,n.jsx)("div",{className:"h-fit w-fit",children:(0,n.jsx)(l(),{src:y,height:45,width:45,alt:"avatar"})}):(0,n.jsxs)("div",{className:"hidden h-[6.25em] w-[2.8em] flex-col items-center justify-between rounded-[0.65em] bg-[#F5F6FA] sm:flex",children:[(0,n.jsx)(u,{plusFunction:C}),(0,n.jsx)("span",{className:"text-[1.05rem] font-[500] text-moderateBlue",children:j}),(0,n.jsx)(o,{minusFunction:k})]}),(0,n.jsxs)("div",{className:"flex w-full flex-col justify-start gap-[0.9em]",children:[(!A||!H)&&(0,n.jsxs)("div",{className:"flex justify-between text-[1.05rem] tracking-[-0.03em]",children:[(0,n.jsxs)("div",{className:"flex items-center gap-[1em]",children:[(0,n.jsx)(l(),{src:y,height:32,width:32,alt:"avatar"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"font-[500] text-darkBlue",children:b}),S&&(0,n.jsx)("span",{className:"mb-[-1px] flex h-[1.48em] w-[2.85em] items-center justify-center rounded-sm bg-moderateBlue px-2 text-[0.8rem] tracking-wide text-white",children:"you"})]}),(0,n.jsx)("span",{className:"text-grayishBlue",children:w})]}),S?(0,n.jsxs)("div",{className:"hidden gap-6 pr-[1.55em] sm:flex",children:[(0,n.jsx)(d,{onButtonClick:B,icon:m,text:"Delete",color:"text-softRed"}),(0,n.jsx)(d,{onButtonClick:()=>{M(!1),D(!0)},icon:i,text:"Edit",color:"text-moderateBlue"})]}):(0,n.jsx)("div",{className:"hidden pr-[1.55em] sm:flex",children:(0,n.jsx)(d,{onButtonClick:()=>{r&&s(e=>{let t={...e};return p.current&&t.comments[p.current[0]].replies.splice(p.current[1]-1,1),t}),h(!0),E()},icon:c,text:"Reply",color:"text-moderateBlue"})})]}),(0,n.jsxs)("div",{className:"flex h-full flex-col pr-4 tracking-[0.001em] text-grayishBlue",children:[A?(0,n.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row ".concat(v&&!f.current?"md:w-[33em]":"md:w-[38em]"," w-full"),children:[(0,n.jsx)("textarea",{rows:_?_.length/N+1:1,autoFocus:!0,value:U?_:[v,_].join(" "),onChange:e=>{U?R(e.target.value):v&&R(e.target.value.slice(v.length+1))},className:"".concat(v&&!f.current?"md:w-[33em]":"md:w-[38em]"," min-h-[6em] w-full resize-none space-x-1 rounded-[0.5em] px-6 py-2 placeholder-grayishBlue outline outline-1 outline-lightGray focus:outline-moderateBlue"),children:g}),H&&(0,n.jsx)("div",{className:"h-fit w-fit place-self-end md:place-self-start",children:(0,n.jsx)(x,{text:"REPLY",onButtonClick:()=>{_&&(h(!1),F(_),D(!1),f.current=!1)}})})]}):(0,n.jsxs)("div",{className:"".concat(v?"md:w-[33em]":"md:w-[38em]"," w-full space-x-1"),children:[v&&(0,n.jsx)("span",{className:"font-[500]  text-moderateBlue",children:v}),_&&(0,n.jsx)("span",{className:"break-words",children:_})]}),(0,n.jsxs)("div",{className:"mt-[1em] flex w-full items-center justify-between sm:hidden",children:[(!A||!H)&&(0,n.jsxs)("div",{className:"flex h-[2.8em] w-[6.25em] items-center justify-between rounded-[0.65em] bg-[#F5F6FA] sm:flex",children:[(0,n.jsx)(u,{plusFunction:C}),(0,n.jsx)("span",{className:"text-[1.05rem] font-[500] text-moderateBlue",children:j}),(0,n.jsx)(o,{minusFunction:k})]}),(0,n.jsx)("div",{children:(!A||!H)&&(0,n.jsx)("div",{className:"flex justify-between text-[1.05rem] tracking-[-0.03em]",children:S?(0,n.jsxs)("div",{className:"flex gap-6 pr-[1.55em] sm:hidden",children:[(0,n.jsx)(d,{onButtonClick:B,icon:m,text:"Delete",color:"text-softRed"}),(0,n.jsx)(d,{onButtonClick:()=>{M(!1),D(!0)},icon:i,text:"Edit",color:"text-moderateBlue"})]}):(0,n.jsx)("div",{className:"flex pr-[1.55em] sm:hidden",children:(0,n.jsx)(d,{onButtonClick:()=>{r&&s(e=>{let t={...e};return p.current&&t.comments[p.current[0]].replies.splice(p.current[1]-1,1),t}),h(!0),E()},icon:c,text:"Reply",color:"text-moderateBlue"})})})})]})]}),!H&&(0,n.jsx)("div",{className:"flex w-full justify-end pr-[1.5em]",children:A&&(0,n.jsx)(x,{text:"UPDATE",onButtonClick:()=>{_&&(F(_),D(!1))}})})]})]})};return t&&(0,n.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-start bg-[#F5F6FA] font-rubik",children:[g&&(0,n.jsx)("div",{className:"fixed z-10 flex h-full w-full items-center justify-center bg-black bg-opacity-50",children:(0,n.jsxs)("div",{className:"flex h-[15.7em] w-[25em] flex-col items-start justify-between rounded-lg bg-white px-8 pb-8 pt-7",children:[(0,n.jsx)("span",{className:"text-[1.5rem] font-[500] text-[#38454D]",children:"Delete comment"}),(0,n.jsx)("span",{className:"text-[#87888B]",children:"Are you sure you want to delete this comment? This will remove the comment and canâ€˜t be undone"}),(0,n.jsxs)("div",{className:"flex h-[3em] w-full gap-3.5 self-center",children:[(0,n.jsx)("button",{onClick:()=>{w(!1)},className:"w-full rounded-lg bg-[#68727E] text-white",children:"NO, CANCEL"}),(0,n.jsx)("button",{onClick:()=>{s(j),w(!1)},className:"w-full rounded-lg bg-[#EF6365] text-white",children:"YES, DELETE"})]})]})}),(0,n.jsxs)("div",{className:"mb-[4em] mt-[4em] flex w-full flex-col items-center px-4 md:px-0",children:[t.comments.map((r,l)=>{let c=t.comments[l].user.username===t.currentUser.username;return(0,n.jsxs)("div",{className:"flex w-full flex-col items-center gap-[1.2em] md:w-fit",children:[(0,n.jsx)(y,{isNotReply:!0,passEditedData:e=>{s(t=>{let s={...t};return s.comments[l].content=e,s})},onButtonDeleteClick:()=>{w(!0),v(()=>{let e=JSON.parse(JSON.stringify(t));return e.comments.splice(l,1),e})},onButtonReplyClick:()=>{0===t.comments[l].replies.length?f.current=!0:f.current=!1,s(s=>{let n={...s},r={id:t.comments[l].replies.length+1,content:e,createdAt:"now",score:0,voted:[],replyingTo:t.comments[l].user.username,user:{image:{png:t.currentUser.image.png,webp:t.currentUser.image.webp},username:t.currentUser.username}};return n.comments[l].replies.push(r),p.current=[l,t.comments[l].replies.length],n})},content:r.content,createdAt:r.createdAt,score:r.score,username:r.user.username,webp:r.user.image.webp.replace("images/",""),plusFunction:()=>{c||t.comments[l].voted.includes(t.currentUser.username)||s(e=>{let s={...e};return s.comments[l].voted.push(t.currentUser.username),s.comments[l].score++,s})},minusFunction:()=>{c||t.comments[l].voted.includes(t.currentUser.username)||s(e=>{let s={...e};return s.comments[l].voted.push(t.currentUser.username),s.comments[l].score--,s})}}),(0,n.jsxs)("div",{className:"flex w-full justify-end gap-[1em] md:gap-[2.7em]",children:[r.replies.length>0&&!f.current&&(0,n.jsx)("div",{className:"mb-[1.8em] w-0.5 bg-lightGray"}),r.replies.length>0&&(0,n.jsx)("div",{className:"mb-5 flex w-full flex-col gap-6 md:w-fit",children:r.replies.map((r,c)=>{let i=t.comments[l].replies[c].user.username===t.currentUser.username;return(0,n.jsx)(y,{passEditedData:e=>{s(t=>{let s={...t};return s.comments[l].replies[c].content=e,s})},onButtonReplyClick:()=>{s(s=>{let n={...s},r={id:t.comments[l].replies.length+1,content:e,createdAt:"now",score:0,voted:[],replyingTo:t.comments[l].replies[c].user.username,user:{image:{png:t.currentUser.image.png,webp:t.currentUser.image.webp},username:t.currentUser.username}};return n.comments[l].replies.push(r),n})},onButtonDeleteClick:()=>{w(!0),v(()=>{let e=JSON.parse(JSON.stringify(t));return e.comments[l].replies.splice(c,1),e})},content:r.content,createdAt:r.createdAt,score:r.score,replyingTo:"@".concat(r.replyingTo),username:r.user.username,webp:r.user.image.webp.replace("images/",""),plusFunction:()=>{i||t.comments[l].replies[c].voted.includes(t.currentUser.username)||s(e=>{let s={...e};return s.comments[l].replies[c].voted.push(t.currentUser.username),s.comments[l].replies[c].score++,s})},minusFunction:()=>{i||t.comments[l].replies[c].voted.includes(t.currentUser.username)||s(e=>{let s={...e};return s.comments[l].replies[c].voted.push(t.currentUser.username),s.comments[l].replies[c].score--,s})}},c)})})]})]},l)}),(0,n.jsx)(()=>{let[e,r]=(0,a.useState)("");return(0,n.jsxs)("div",{className:"flex min-h-[9em] w-full flex-col items-start gap-[1.1em] rounded-[0.5em] bg-white py-[1.6em] pl-[1.5em] pr-[1.4em] sm:flex-row md:w-[45.625em]",children:[(0,n.jsx)(l(),{className:"mt-[0.18em] hidden sm:block",src:t?t.currentUser.image.webp.replace("images/",""):"",height:40,width:40,alt:"avatar"}),(0,n.jsx)("textarea",{rows:e?e.length/(N+10)+1:1,value:e,onChange:e=>{r(e.target.value)},placeholder:"Add a commentâ€¦",className:"min-h-[5.8em] w-full resize-none rounded-[0.5em] px-6 py-3 placeholder-grayishBlue outline outline-1 outline-lightGray focus:outline-moderateBlue md:w-[31.5em]"}),(0,n.jsx)(x,{mobileHide:!0,text:"SEND",onButtonClick:()=>{e&&t&&s(s=>{let n={...s},r={id:t.comments.length+1,content:e,createdAt:"now",score:0,voted:[],user:{image:{png:t.currentUser.image.png,webp:t.currentUser.image.webp},username:t.currentUser.username},replies:[]};return n.comments.push(r),n})}}),(0,n.jsxs)("div",{className:"flex w-full justify-between sm:hidden",children:[(0,n.jsx)(l(),{className:"mt-[0.18em] block h-fit",src:t?t.currentUser.image.webp.replace("images/",""):"",height:40,width:40,alt:"avatar"}),(0,n.jsx)(x,{text:"SEND",onButtonClick:()=>{e&&t&&s(s=>{let n={...s},r={id:t.comments.length+1,content:e,createdAt:"now",score:0,voted:[],user:{image:{png:t.currentUser.image.png,webp:t.currentUser.image.webp},username:t.currentUser.username},replies:[]};return n.comments.push(r),n})}})]})]})},{})]})]})}}},function(e){e.O(0,[986,971,938,744],function(){return e(e.s=8994)}),_N_E=e.O()}]);