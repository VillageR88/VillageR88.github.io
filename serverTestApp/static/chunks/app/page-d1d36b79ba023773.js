(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8994:function(e,t,s){Promise.resolve().then(s.bind(s,5723))},8665:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var l=s(7437),n=s(703),r={src:"/serverTestApp/server/app/_next/static/media/edit_note_FILL0_wght400_GRAD0_opsz24.63bdd9c1.svg",height:24,width:24,blurWidth:0,blurHeight:0},i=e=>{let{alternate:t}=e;return(0,l.jsxs)("div",{className:"flex items-start justify-center gap-2",children:[(0,l.jsx)(n.default,{src:r,alt:"edit_note",width:45,height:45}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"".concat(t?"hidden md:block":"text-3xl"," font-bold text-[orange] md:text-4xl"),children:"My"}),(0,l.jsx)("span",{className:"".concat(t?"hidden md:block":"text-3xl"," font-medium text-white md:text-4xl"),children:"Notebook"})]})]})}},5723:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var l=s(7437),n=s(2265),r=s(7907),i=s(7175),a=s(8665);let o=(0,n.createContext)({});var c=()=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 -960 960 960",width:"18",children:(0,l.jsx)("path",{d:"M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z"})}),x=()=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 -960 960 960",width:"18",children:(0,l.jsx)("path",{d:"M280-200v-80h284q63 0 109.5-40T720-420q0-60-46.5-100T564-560H312l104 104-56 56-200-200 200-200 56 56-104 104h252q97 0 166.5 63T800-420q0 94-69.5 157T564-200H280Z"})}),d=()=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 -960 960 960",width:"18",children:(0,l.jsx)("path",{d:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z"})}),h=()=>{let e=(0,r.useRouter)(),t=(0,n.useContext)(o),s=()=>JSON.stringify(t.dataContext.collections)===JSON.stringify(t.initialDataContext.current.collections);return(0,l.jsx)("nav",{className:"flex w-full justify-center border-b border-[#313131] bg-[#1C1C1C] px-8 py-4",children:(0,l.jsxs)("div",{className:"flex size-full max-w-[90em] items-center justify-between",children:[(0,l.jsx)(a.Z,{alternate:!0}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)("button",{onClick:()=>{(async()=>{try{let e=await fetch("https://serverexpress1-production.up.railway.app/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(t.dataContext)});e.ok?t.initialDataContext.current=t.dataContext:console.error("Failed to save collection group",e)}catch(e){console.error(e)}})()},disabled:s(),className:"button1 flex",type:"button",children:[(0,l.jsx)("span",{className:"hidden md:block",children:"Save"}),(0,l.jsx)(c,{})]}),(0,l.jsxs)("button",{onClick:()=>{t.setDataContext(t.initialDataContext.current)},disabled:s(),className:"button1 flex",type:"button",children:[(0,l.jsx)("span",{className:"hidden md:block",children:"Revert"}),(0,l.jsx)(x,{})]}),(0,l.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),e.push("/login")},className:"button2 group",type:"submit",children:(0,l.jsxs)("div",{className:"button2Inner gap-[3px]",children:[(0,l.jsx)("span",{className:"hidden md:block",children:"Log out"}),(0,l.jsx)(d,{})]})})]})]})})},p=s(659),u=s(3084),m=e=>{let{func:t,alwaysVisible:s}=e;return(0,l.jsx)("div",{className:"size-[20px] transition hover:cursor-grab active:cursor-grabbing group-hover:opacity-100 ".concat(!s&&"md:opacity-0"),onPointerDown:e=>{e.preventDefault(),t(e)},style:{touchAction:"none"},children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",fill:"white",children:(0,l.jsx)("path",{d:"M160-360v-80h640v80H160Zm0-160v-80h640v80H160Z"})})})},v=e=>{let{collectionId:t,setPage:s}=e;return(0,l.jsxs)("button",{onClick:()=>{s(t)},className:"flex items-center gap-1 fill-white text-white transition hover:fill-[orange] hover:text-[orange] group-hover/group2:opacity-100 md:opacity-0",children:[(0,l.jsx)("span",{className:"pr-1 text-white",children:"-"}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 -960 960 960",width:"18",children:(0,l.jsx)("path",{d:"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"})}),(0,l.jsx)("span",{children:"edit"})]})};let g=e=>{let{collection:t,setPage:s}=e,r=(0,p.o)(),i=(0,n.useContext)(o),a=(e,t)=>{i.setDataContext(s=>{let l=s.collections.findIndex(e=>e.id===+t),n=[...s.collections];return n[l]={...n[l],Notes:e},{...s,collections:n}})};return(0,l.jsxs)(u.t.Item,{dragListener:!1,dragControls:r,value:t,className:"group/group2 flex select-none flex-col gap-[6px] rounded-[6px] border border-[#313131] bg-[#232323] px-3 py-4 ",children:[(0,l.jsxs)("div",{className:"flex justify-between px-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 pb-[8px]",children:[(0,l.jsx)("span",{className:"text-left text-[18px] font-bold text-white",children:t.title}),(0,l.jsx)(v,{collectionId:t.id,setPage:s})]}),(0,l.jsx)(m,{alwaysVisible:!0,func:e=>{r.start(e)}})]}),(0,l.jsx)(u.t.Group,{onReorder:e=>{a(e,t.id)},values:t.Notes,className:"flex flex-col gap-2",children:t.Notes.map(e=>(0,l.jsx)(f,{note:e},e.id))},t.id)]},t.id)},f=e=>{let{note:t}=e,s=(0,p.o)();return(0,l.jsx)(u.t.Item,{dragListener:!1,dragControls:s,value:t,className:"group rounded-[6px] bg-[#1C1C1C] p-[10px] text-white",children:(0,l.jsxs)("div",{className:"flex justify-between pl-1 pr-2",children:[(0,l.jsx)("span",{children:t.description}),(0,l.jsx)(m,{func:e=>{s.start(e)}})]})},t.id)};var j=e=>{let{setPage:t}=e,s=(0,n.useContext)(o);return(0,l.jsx)(u.t.Group,{className:"flex w-full max-w-4xl flex-col gap-8",values:s.dataContext.collections,onReorder:e=>{s.setDataContext(t=>({...t,collections:e}))},children:s.dataContext.collections.map(e=>(0,l.jsx)(g,{collection:e,setPage:t},e.id))})},w=()=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 -960 960 960",width:"18",children:(0,l.jsx)("path",{d:"M360-240 120-480l240-240 56 56-144 144h488v-160h80v240H272l144 144-56 56Z"})}),b=()=>(0,l.jsxs)("button",{className:"flex items-center gap-1 fill-white text-white opacity-0 transition hover:fill-[orange] hover:text-[orange] group-hover:opacity-100",children:[(0,l.jsx)("span",{className:"pr-1 text-white",children:"-"}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 -960 960 960",width:"18",children:(0,l.jsx)("path",{d:"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"})}),(0,l.jsx)("span",{children:"rename"})]}),N=e=>{let{page:t,setPage:s}=e,r=(0,n.useContext)(o);return(0,l.jsxs)("div",{className:"flex w-full max-w-4xl flex-col gap-6",children:[(0,l.jsxs)("div",{className:"group flex select-none flex-col gap-[6px] rounded-[6px] border border-[#313131] bg-[#232323] px-3 py-4 ",children:[(0,l.jsx)("div",{className:"flex justify-between px-1",children:(0,l.jsxs)("div",{className:" flex items-center gap-3 pb-[8px]",children:[(0,l.jsx)("span",{className:"text-left text-[18px] font-bold text-white",children:r.dataContext.collections[t-1].title}),(0,l.jsx)(b,{})]})}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:r.dataContext.collections[t-1].Notes.map(e=>(0,l.jsx)("div",{className:"rounded-[6px] bg-[#1C1C1C] p-[10px] text-white",children:(0,l.jsx)("div",{className:"flex justify-between pl-1 pr-2",children:(0,l.jsx)("span",{children:e.description})})},e.id))})]}),(0,l.jsxs)("button",{className:"button1 flex",onClick:()=>{s(null)},children:[(0,l.jsx)(w,{}),(0,l.jsx)("span",{className:"hidden pl-1 md:block",children:"Return"})]})]})},C=()=>{let[e,t]=(0,n.useState)(null);return(0,l.jsx)("main",{className:"flex w-full justify-center bg-[#1C1C1C] px-8 py-12",children:e?(0,l.jsx)(N,{page:e,setPage:t}):(0,l.jsx)(j,{setPage:t})})};function y(){let[e,t]=(0,n.useState)(!1),s=(0,n.useRef)(null),[a,c]=(0,n.useState)({collections:[]}),x=(0,n.useRef)({collections:[]}),d=(0,r.useRouter)();return(0,n.useEffect)(()=>{let e=localStorage.getItem("token");e?s.current=e:d.push("/login")},[d]),(0,n.useEffect)(()=>{let e=async()=>{t(!0);try{let e=await fetch("https://serverexpress1-production.up.railway.app/",{method:"GET",headers:{Authorization:"Bearer ".concat(s.current)}});if(e.ok){let t=await e.json();c(t),x.current=t}else console.error("Failed to load collection group",e)}catch(e){console.error(e)}t(!1)};s.current&&e()},[s]),e?(0,l.jsx)("div",{className:"flex min-h-[100dvh] w-full flex-col items-center justify-center md:min-h-screen",children:(0,l.jsx)(i.s5,{width:"200",strokeColor:"orange"})}):null!==s.current&&(0,l.jsx)("div",{className:"flex min-h-[100dvh] w-full flex-col items-center justify-start overflow-hidden text-clip md:min-h-screen",children:(0,l.jsxs)(o.Provider,{value:{dataContext:a,setDataContext:c,initialDataContext:x},children:[(0,l.jsx)(h,{}),(0,l.jsx)(C,{})]})})}}},function(e){e.O(0,[571,310,530,971,69,744],function(){return e(e.s=8994)}),_N_E=e.O()}]);